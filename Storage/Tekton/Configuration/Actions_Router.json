{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "metadata": {
    "version": "1.0.0",
    "schema_version": "1.0.0",
    "created": "2026-01-23T00:00:00Z",
    "last_updated": "2026-01-23T00:00:00Z",
    "description": "Mapeo de intenciones a acciones del sistema de gobernanza Tekton"
  },
  "intent_mappings": {
    "start_complex_task": {
      "intent_patterns": [
        "vamos a empezar una tarea compleja",
        "iniciar tarea compleja",
        "empezar tarea compleja",
        "comenzar tarea compleja"
      ],
      "action": {
        "tool": "Tekton/Tools/Inicio-Tarea.ps1",
        "template": "Storage/Tekton/Actions/Tarea-Compleja.template.md",
        "protocol": "COMPLEX_TASK_PROTOCOL",
        "required_steps": [
          "PASO_0_ESTADO_BASE",
          "PASO_1_APERTURA",
          "PASO_2_DESARROLLO",
          "PASO_3_CIERRE_TECNICO",
          "PASO_4_SINCRONIZACION_GLOBAL"
        ],
        "blocking_rules": [
          "No commit sin PASO_1",
          "No commit de código sin compilar",
          "No push sin hitos registrados",
          "No merge sin PASO_3",
          "No cerrar sin PASO_4"
        ]
      }
    },
    "close_task": {
      "intent_patterns": [
        "cerrar tarea",
        "finalizar tarea",
        "completar tarea"
      ],
      "action": {
        "tool": "Tekton/Tools/Close-Task.ps1",
        "protocol": "TASK_CLOSURE",
        "prerequisites": [
          "Todos los cambios commiteados",
          "actual.md actualizado",
          "Código compila sin errores"
        ]
      }
    },
    "unify_branch": {
      "intent_patterns": [
        "unificar rama",
        "merge a master",
        "consolidar cambios"
      ],
      "action": {
        "tool": "Tekton/Tools/Unificar-Rama.ps1",
        "protocol": "BRANCH_UNIFICATION",
        "prerequisites": [
          "Close-Task.ps1 ejecutado",
          "AuditStamp generado",
          "ready_for_unify: true"
        ]
      }
    },
    "sync_latido": {
      "intent_patterns": [
        "sincronizar latido",
        "sync latido",
        "sincronización global"
      ],
      "action": {
        "tool": "Tekton/Tools/Sync-Latido.ps1",
        "protocol": "LATIDO_SYNC",
        "scope": [
          "Almacén Local (/Storage)",
          "activity_stream.jsonl",
          "Validación de hashes"
        ]
      }
    },
    "register_milestone": {
      "intent_patterns": [
        "registrar hito",
        "marcar hito",
        "hito completado"
      ],
      "action": {
        "tool": "Tekton/Tools/Write-TaeResult.ps1",
        "protocol": "MILESTONE_REGISTRATION",
        "source_tool": "TAE-DEV-MILESTONE",
        "required_fields": [
          "milestone",
          "files_affected",
          "validation_status"
        ]
      }
    }
  },
  "protocol_definitions": {
    "COMPLEX_TASK_PROTOCOL": {
      "name": "Protocolo de Tarea Compleja",
      "template_path": "Storage/Tekton/Actions/Tarea-Compleja.template.md",
      "enforcement_level": "S+_GRADE",
      "mandatory": true,
      "description": "Circuito de obligado cumplimiento para tareas complejas"
    },
    "TASK_CLOSURE": {
      "name": "Protocolo de Cierre de Tarea",
      "tool": "Tekton/Tools/Close-Task.ps1",
      "enforcement_level": "HIGH",
      "mandatory": true,
      "description": "Preparación de tarea para unificación"
    },
    "BRANCH_UNIFICATION": {
      "name": "Protocolo de Unificación de Rama",
      "tool": "Tekton/Tools/Unificar-Rama.ps1",
      "enforcement_level": "HIGH",
      "mandatory": true,
      "description": "Unificación atómica de rama a master"
    },
    "LATIDO_SYNC": {
      "name": "Protocolo de Sincronización Latido",
      "tool": "Tekton/Tools/Sync-Latido.ps1",
      "enforcement_level": "MEDIUM",
      "mandatory": false,
      "description": "Sincronización con Almacén Local"
    },
    "MILESTONE_REGISTRATION": {
      "name": "Protocolo de Registro de Hitos",
      "tool": "Tekton/Tools/Write-TaeResult.ps1",
      "enforcement_level": "MEDIUM",
      "mandatory": false,
      "description": "Registro de hitos intermedios durante desarrollo"
    }
  },
  "routing_rules": {
    "priority_order": [
      "start_complex_task",
      "close_task",
      "unify_branch",
      "sync_latido",
      "register_milestone"
    ],
    "conflict_resolution": {
      "strategy": "template_precedence",
      "description": "El template de tarea compleja tiene precedencia sobre acciones individuales"
    }
  }
}
